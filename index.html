
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Optimized viewport for mobile - prevents zoom issues and ensures proper scaling -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    
    <!-- Mobile-specific optimizations -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="theme-color" content="#2563eb" />
    <meta name="apple-mobile-web-app-title" content="Funding For Scotland" />
    
    <!-- Critical resource hints for fastest loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- PERFORMANCE FIX: Load minimal Inter font weights for faster loading -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"></noscript>
    
    <!-- No hero image preload needed for homepage -->
    
    <!-- Preload critical CSS as inline (already done below) -->
    
    <link rel="manifest" href="/manifest.json" />
    
    <title>Funding For Scotland - Scottish Home Improvement Grants & Funding</title>
    <meta name="description" content="Scotland's leading consultancy for homeowner grants and funding. Access ECO4 grants, solar panels, boiler replacements, and home improvement funding up to £25,000." />
    <meta name="keywords" content="Scottish grants, ECO4, solar panels, boiler replacement, home improvements, funding, Scotland" />

    <!-- Font loading moved above to prevent 404s -->

    <!-- Essential meta tags for social sharing -->
    <meta property="og:title" content="Funding For Scotland - Unlock Scottish Grants & Funding" />
    <meta property="og:description" content="Access up to £25,000 in government grants for home improvements, solar panels, and energy efficiency upgrades across Scotland." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/lovable-uploads/9c72256e-c008-468d-8fb8-782177d8fddb.png" />
    <meta name="robots" content="index, follow" />
    
    <!-- Security headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    
    <!-- Optimized favicon -->
    <link rel="icon" href="/lovable-uploads/4a90d040-76c6-4702-9385-ce01ad01cbc0.png" type="image/png">

    <!-- ULTRA-COMPRESSED CRITICAL CSS - Only essential styles for FCP -->
    <style>
      /* PERFORMANCE FIX: Minimal critical CSS for instant FCP */
      *{box-sizing:border-box;margin:0;padding:0}
      html{font-family:'Inter',system-ui,sans-serif;-webkit-text-size-adjust:100%}
      body{background:#fff;color:#1a1a1a;line-height:1.6}
      
      /* Critical hero gradient - absolute minimum */
      .hero-gradient{background:linear-gradient(135deg,#2563eb 0%,#059669 100%)}
      .hero-text-white{color:#fff}
      .hero-text-blue-100{color:#dbeafe}
      .hero-text-blue-50{color:#eff6ff}
      .hero-text-green-300{color:#86efac}
      
      /* Absolute minimum layout classes */
      .min-h-screen{min-height:100vh}
      .flex{display:flex}
      .flex-col{flex-direction:column}
      .flex-1{flex:1}
      .items-center{align-items:center}
      .justify-center{justify-content:center}
      .relative{position:relative}
      .absolute{position:absolute}
      .inset-0{top:0;right:0;bottom:0;left:0}
      .grid{display:grid}
      .w-full{width:100%}
      .h-full{height:100%}
      .overflow-hidden{overflow:hidden}
      
      /* Essential text sizing */
      .text-4xl{font-size:2.25rem;line-height:2.5rem}
      .font-bold{font-weight:600}
      .leading-tight{line-height:1.25}
      
      /* Loading animation */
      @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
      .animate-pulse{animation:pulse 2s infinite}
      
      /* Loading states */
      .loading #root{opacity:0;transition:opacity .2s}
      .loaded #root{opacity:1}
      
      /* Mobile breakpoints - only essential */
      @media (min-width:1024px){
        .lg\:text-6xl{font-size:3.75rem;line-height:1}
        .lg\:grid-cols-2{grid-template-columns:1fr 1fr}
      }
    </style>
    
    <!-- Load critical Tailwind CSS inline for Speed Index optimization -->
    <style id="critical-tailwind">
      /* Additional critical classes for homepage performance */
      .order-1{order:1}.order-2{order:2}.lg\:order-1{order:1}.lg\:order-2{order:2}
      .justify-center{justify-content:center}.lg\:justify-end{justify-content:flex-end}
      .text-center{text-align:center}.lg\:text-left{text-align:left}
      .max-w-md{max-width:28rem}.mx-auto{margin-left:auto;margin-right:auto}
      .lg\:mx-0{margin-left:0;margin-right:0}.lg\:ml-auto{margin-left:auto}
      .backdrop-blur-sm{backdrop-filter:blur(4px)}.bg-white\/10{background-color:rgba(255,255,255,0.1)}
      .border-white\/20{border-color:rgba(255,255,255,0.2)}.rounded-2xl{border-radius:1rem}
      .hover\:bg-white\/20:hover{background-color:rgba(255,255,255,0.2)}
      .transition-all{transition:all 0.15s ease}.duration-300{transition-duration:0.3s}
      .transform{transform:translateZ(0)}.hover\:scale-105:hover{transform:scale(1.05)}
      .touch-manipulation{touch-action:manipulation}
    </style>
    
    <!-- Load non-critical Tailwind CSS after critical rendering -->
    <link rel="preload" as="style" href="/src/index.css" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/src/index.css"></noscript>

    <!-- Ultra-optimized Facebook Pixel - Delayed until user interaction or 5 seconds -->
    <script>
      window.fbq=window.fbq||function(){(window.fbq.q=window.fbq.q||[]).push(arguments)};window.fbq.q=[];
      
      let fbPixelLoaded = false;
      function loadFacebookPixel(){
        if(fbPixelLoaded) return;
        fbPixelLoaded = true;
        const s=document.createElement('script');
        s.async=true;
        s.src='https://connect.facebook.net/en_US/fbevents.js';
        s.onload=function(){fbq('init','1423013825182147');fbq('track','PageView')};
        document.head.appendChild(s);
      }
      
      // PERFORMANCE FIX: Longer delay to prioritize critical page loading
      let interactionTimer = setTimeout(loadFacebookPixel, 5000);
      ['click','scroll'].forEach(e=>{
        document.addEventListener(e, function() {
          clearTimeout(interactionTimer);
          setTimeout(loadFacebookPixel, 100); // Small delay even after interaction
        }, {once:true, passive:true});
      });
    </script>
  </head>

  <body class="loading">
    <!-- PERFORMANCE FIX: Optimized critical path script -->
    <script>
      // Mark DOM ready and minimize processing
      document.addEventListener('DOMContentLoaded', function() {
        document.body.className = 'loaded';
        
        // MINIMAL prefetching after 3 seconds to prioritize critical loading
        setTimeout(prefetchResources, 3000);
      });
      
      // PERFORMANCE FIX: Minimal prefetching to reduce network overhead
      function prefetchResources() {
        // Only prefetch after the page is completely stable
        if (document.readyState !== 'complete') {
          setTimeout(prefetchResources, 1000);
          return;
        }
        
        // Prefetch likely next pages with lower priority
        const likelyPages = ['/eco4', '/solar', '/gas-boilers', '/home-improvements'];
        likelyPages.forEach((path, index) => {
          setTimeout(() => {
            const link = document.createElement('link');
            link.rel = 'prefetch';
            link.href = path;
            link.fetchPriority = 'low';
            document.head.appendChild(link);
          }, index * 200);
        });
        
        // Prefetch critical images for next likely pages using updated WebP images
        const criticalImages = [
          '/lovable-uploads/9c72256e-c008-468d-8fb8-782177d8fddb.png?w=768&q=75',
          '/lovable-uploads/339dccf0-fb0b-4516-8463-6609ffa65db5.png?w=768&q=75'
        ];
        
        criticalImages.forEach((src, index) => {
          setTimeout(() => {
            const link = document.createElement('link');
            link.rel = 'prefetch';
            link.as = 'image';
            link.href = src;
            link.fetchPriority = 'low';
            document.head.appendChild(link);
          }, (index + likelyPages.length) * 200);
        });
      }
      
      // Performance timing
      if ('performance' in window && 'mark' in performance) {
        performance.mark('critical-css-loaded');
        window.addEventListener('load', () => performance.mark('page-loaded'));
      }
    </script>
    
    <!-- Meta Pixel Noscript -->
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1423013825182147&ev=PageView&noscript=1"
    /></noscript>
    
    <div id="root">
      <!-- Critical loading fallback for immediate FCP -->
      <div class="min-h-screen flex flex-col bg-white">
        <nav class="bg-white shadow-lg h-16 flex items-center justify-center">
          <div class="flex items-center">
            <img 
              src="/lovable-uploads/530a44a7-5098-4326-9fc0-fb553bdd9052.png" 
              alt="Funding For Scotland Logo" 
              class="h-8 w-auto object-contain"
              width="140"
              height="56"
            />
          </div>
        </nav>
        <main class="flex-1 flex items-center justify-center bg-gray-50">
          <div class="text-center">
            <div class="inline-block animate-pulse bg-gray-300 h-8 w-48 rounded mb-4"></div>
            <div class="inline-block animate-pulse bg-gray-200 h-4 w-32 rounded"></div>
          </div>
        </main>
      </div>
    </div>
    
    <!-- Load main app script immediately for critical rendering -->
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
