
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Optimized viewport for mobile - prevents zoom issues and ensures proper scaling -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    
    <!-- Mobile-specific optimizations -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="theme-color" content="#2563eb" />
    <meta name="apple-mobile-web-app-title" content="Funding For Scotland" />
    
    <!-- Critical resource hints for fastest loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Preload critical Inter font weights immediately -->
    <link rel="preload" as="font" href="https://fonts.gstatic.com/s/inter/v18/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiA.woff2" type="font/woff2" crossorigin>
    <link rel="preload" as="font" href="https://fonts.gstatic.com/s/inter/v18/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYAZ9hiA.woff2" type="font/woff2" crossorigin>
    <link rel="preload" as="font" href="https://fonts.gstatic.com/s/inter/v18/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuI6fAZ9hiA.woff2" type="font/woff2" crossorigin>
    
    <!-- Preload critical ECO4 hero image with highest priority -->
    <link rel="preload" as="image" href="/lovable-uploads/1932c2a7-9b3e-46a2-8e62-d0fabe9d2ade.png" fetchpriority="high" type="image/png">
    
    <!-- Preload critical CSS as inline (already done below) -->
    
    <link rel="manifest" href="/manifest.json" />
    
    <title>Funding For Scotland - Scottish Home Improvement Grants & Funding</title>
    <meta name="description" content="Scotland's leading consultancy for homeowner grants and funding. Access ECO4 grants, solar panels, boiler replacements, and home improvement funding up to £25,000." />
    <meta name="keywords" content="Scottish grants, ECO4, solar panels, boiler replacement, home improvements, funding, Scotland" />

    <!-- Load critical fonts with optimal strategy -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"></noscript>

    <!-- Essential meta tags for social sharing -->
    <meta property="og:title" content="Funding For Scotland - Unlock Scottish Grants & Funding" />
    <meta property="og:description" content="Access up to £25,000 in government grants for home improvements, solar panels, and energy efficiency upgrades across Scotland." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/lovable-uploads/1932c2a7-9b3e-46a2-8e62-d0fabe9d2ade.png" />
    <meta name="robots" content="index, follow" />
    
    <!-- Security headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    
    <!-- Optimized favicon -->
    <link rel="icon" href="/lovable-uploads/4a90d040-76c6-4702-9385-ce01ad01cbc0.png" type="image/png">

    <!-- Ultra-compressed critical CSS with mobile-first optimizations -->
    <style>
      /* Mobile-first critical CSS - optimized for touch devices */
      *{box-sizing:border-box;margin:0;padding:0}html{font-family:'Inter',system-ui,-apple-system,sans-serif;scroll-behavior:smooth;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}body{background:#fff;color:#1a1a1a;-webkit-font-smoothing:antialiased;line-height:1.6;touch-action:manipulation}
      
      /* Mobile touch optimization */
      button,a,[role="button"]{min-height:44px;min-width:44px;touch-action:manipulation;-webkit-tap-highlight-color:transparent}
      
      /* Critical hero styles with mobile-first approach */
      .hero-gradient{background:linear-gradient(135deg,#2563eb 0%,#1d4ed8 35%,#059669 100%)}.hero-text-white{color:#fff}.hero-text-blue-100{color:#dbeafe}.hero-text-blue-50{color:#eff6ff}.hero-text-green-300{color:#86efac}
      
      /* Mobile-optimized layout */
      .relative{position:relative}.absolute{position:absolute}.inset-0{top:0;right:0;bottom:0;left:0}.flex{display:flex}.grid{display:grid}.w-full{width:100%}.h-full{height:100%}.items-center{align-items:center}.justify-center{justify-content:center}.space-x-3>:not([hidden])~:not([hidden]){margin-left:.75rem}.space-y-3>:not([hidden])~:not([hidden]){margin-top:.75rem}
      
      /* Mobile typography - larger sizes for readability */
      .text-4xl{font-size:2rem;line-height:2.25rem}.text-xl{font-size:1.125rem;line-height:1.75rem}.text-lg{font-size:1rem;line-height:1.5rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.leading-tight{line-height:1.25}
      
      /* Mobile spacing - optimized for touch */
      .mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.px-4{padding:0 1rem}.py-20{padding:3rem 0}.gap-12{gap:2rem}
      
      /* Mobile hero image with performance optimization */
      .hero-image-container{aspect-ratio:16/9;background:#f3f4f6;transform:translateZ(0);will-change:transform}
      
      /* Mobile form optimization */
      .form-card{background:rgba(255,255,255,.95);backdrop-filter:blur(10px);border-radius:.75rem;box-shadow:0 10px 15px -3px rgba(0,0,0,.1);padding:1.5rem;max-width:100%}
      
      /* Touch-optimized inputs */
      input,textarea,select{min-height:44px;font-size:16px;border-radius:.5rem;border:1px solid #d1d5db;padding:.75rem;width:100%}
      input:focus,textarea:focus,select:focus{outline:2px solid #2563eb;outline-offset:2px;border-color:#2563eb}
      
      /* Loading states */
      .loading #root{opacity:0;transition:opacity .2s}.loaded #root{opacity:1}
      .order-1{order:1}.order-2{order:2}
      
      /* Mobile-first responsive breakpoints */
      @media (min-width:640px){
        .text-4xl{font-size:2.25rem;line-height:2.5rem}
        .py-20{padding:4rem 0}
        .gap-12{gap:2.5rem}
        .form-card{padding:2rem}
      }
      
      @media (min-width:1024px){
        .text-4xl,.lg\:text-6xl{font-size:3.75rem;line-height:1}
        .py-20,.lg\:py-24{padding:6rem 0}
        .lg\:grid-cols-2{grid-template-columns:1fr 1fr}
        .lg\:order-1{order:1}
        .lg\:order-2{order:2}
        .lg\:justify-end{justify-content:flex-end}
        .lg\:px-8{padding-left:2rem;padding-right:2rem}
        .gap-12{gap:3rem}
        
        /* Desktop-specific touch target adjustments */
        button,a,[role="button"]{min-height:40px;min-width:40px}
      }
      
      /* High-DPI screen optimizations */
      @media (-webkit-min-device-pixel-ratio:2),(min-resolution:192dpi){
        .hero-image-container{background-size:cover;background-position:center}
      }
      
      /* Reduce motion for accessibility */
      @media (prefers-reduced-motion:reduce){
        *{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important;scroll-behavior:auto !important}
        .hero-image-container{transform:none !important}
      }
    </style>
    
    <!-- Load non-critical Tailwind CSS after critical rendering -->
    <link rel="preload" as="style" href="/src/index.css" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/src/index.css"></noscript>

    <!-- Optimized Facebook Pixel - Minimal critical tracking -->
    <script>
      window.fbq=window.fbq||function(){(window.fbq.q=window.fbq.q||[]).push(arguments)};window.fbq.q=[];
      
      function loadFacebookPixel(){
        if(window.fbPixelLoaded)return;window.fbPixelLoaded=true;
        const s=document.createElement('script');s.async=true;s.src='https://connect.facebook.net/en_US/fbevents.js';
        s.onload=function(){fbq('init','1423013825182147');fbq('track','PageView')};document.head.appendChild(s);
      }
      
      document.readyState==='loading'?document.addEventListener('DOMContentLoaded',function(){setTimeout(loadFacebookPixel,1000)}):setTimeout(loadFacebookPixel,1000);
      ['mousedown','touchstart','scroll','keydown'].forEach(e=>document.addEventListener(e,loadFacebookPixel,{once:true,passive:true}));
    </script>
  </head>

  <body class="loading">
    <!-- Immediate critical path script -->
    <script>
      // Mark DOM ready and start paint immediately
      document.addEventListener('DOMContentLoaded', function() {
        document.body.className = 'loaded';
        
        // Intelligent resource prefetching after critical rendering
        if ('requestIdleCallback' in window) {
          requestIdleCallback(function() {
            prefetchLikelyResources();
          });
        } else {
          setTimeout(prefetchLikelyResources, 2000);
        }
      });
      
      // Prefetch strategy for likely next navigations from ECO4
      function prefetchLikelyResources() {
        const likelyPages = [
          { path: '/solar', priority: 'high' },
          { path: '/gas-boilers', priority: 'high' },
          { path: '/home-improvements', priority: 'medium' },
          { path: '/contact', priority: 'low' }
        ];
        
        // Prefetch likely page routes
        likelyPages.forEach(page => {
          const link = document.createElement('link');
          link.rel = 'prefetch';
          link.href = page.path;
          link.fetchPriority = page.priority;
          document.head.appendChild(link);
        });
        
        // Prefetch likely hero images for next pages
        const likelyImages = [
          '/lovable-uploads/597dfb86-407d-45a4-8ed9-bab0b1657c04.png', // Gas boilers
          '/lovable-uploads/29502115-60f2-411e-928e-8d3f6c3383c7.png'  // Home improvements
        ];
        
        likelyImages.forEach((src, index) => {
          setTimeout(() => {
            const link = document.createElement('link');
            link.rel = 'prefetch';
            link.as = 'image';
            link.href = src;
            link.fetchPriority = 'low';
            document.head.appendChild(link);
          }, index * 500); // Stagger to avoid bandwidth competition
        });
        
        // Preconnect to form submission domains
        const formDomains = ['https://script.google.com', 'https://hooks.zapier.com'];
        formDomains.forEach(domain => {
          const link = document.createElement('link');
          link.rel = 'preconnect';
          link.href = domain;
          link.crossOrigin = 'anonymous';
          document.head.appendChild(link);
        });
      }
      
      // Performance mark for critical rendering
      if ('performance' in window && 'mark' in performance) {
        performance.mark('critical-css-loaded');
      }
    </script>
    
    <!-- Meta Pixel Noscript -->
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1423013825182147&ev=PageView&noscript=1"
    /></noscript>
    
    <div id="root"></div>
    
    <!-- Deferred main app script with performance optimization -->
    <script>
      // Defer main script loading until critical path is complete
      function loadMainScript() {
        const script = document.createElement('script');
        script.type = 'module';
        script.src = '/src/main.tsx';
        script.async = true;
        document.body.appendChild(script);
      }
      
      // Load main script after critical rendering
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadMainScript);
      } else {
        loadMainScript();
      }
    </script>
  </body>
</html>
